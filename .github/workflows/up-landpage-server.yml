name: Deploy LandPage-HotelVitoria to Server via Tailscale VPN

on:
  push:
    branches:
      - main

jobs:
  deploy:

    runs-on: ubuntu-latest

    steps:

    - name: Tailscale
      uses: tailscale/github-action@v2
      with:
        authkey: ${{ secrets.TS_AUTH_KEY }}
        tags: tag:ci

    - name: check netmap
      run:
        tailscale status

    - name: Checkout Code
      uses: actions/checkout@v4

    - name: Copy to Server
      run: |
        ssh henrique@hotel "[ -d /home/henrique/web-henrique/LpHotel ] || mkdir /home/henrique/web-henrique/LpHotel"
        sshpass -p $SSH_PASSWORD scp -o StrictHostKeyChecking=no -r ./* henrique@hotel:/home/henrique/web-henrique/LpHotel
      env:
        SSH_PASSWORD: ${{ secrets.SSH_PASSWORD }}
        
    # - name: SSH commands
    #   uses: appleboy/ssh-action@v1.0.3
    #   with:
    #     host: ${{ secrets.SSH_HOST }}
    #     username: ${{ secrets.SSH_USERNAME }}
    #     password: ${{ secrets.SSH_PASSWORD }}
    #     script: |
    #       echo "Connected to server"
    #       cd /home/henrique/LpHotel
    #       npm install
    #       npm run build

    #       # Adicione outros comandos conforme necess√°rio